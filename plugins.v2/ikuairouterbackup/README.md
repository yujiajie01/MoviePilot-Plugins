## IP 分组功能

IP 分组功能获取 IP 段信息，并自动同步到爱快路由器中创建 IP 分组。这些分组可以在爱快路由的流控、分流等设置中使用。

### 支持的省份

| 省份   | 说明             | 省份 | 说明           |
| ------ | ---------------- | ---- | -------------- |
| 北京   | 北京市           | 上海 | 上海市         |
| 天津   | 天津市           | 重庆 | 重庆市         |
| 河北   | 河北省           | 江苏 | 江苏省         |
| 山西   | 山西省           | 浙江 | 浙江省         |
| 内蒙古 | 内蒙古自治区     | 安徽 | 安徽省         |
| 辽宁   | 辽宁省           | 福建 | 福建省         |
| 吉林   | 吉林省           | 江西 | 江西省         |
| 黑龙江 | 黑龙江省         | 山东 | 山东省         |
| 河南   | 河南省           | 湖北 | 湖北省         |
| 湖南   | 湖南省           | 广东 | 广东省         |
| 广西   | 广西壮族自治区   | 海南 | 海南省         |
| 四川   | 四川省           | 贵州 | 贵州省         |
| 云南   | 云南省           | 西藏 | 西藏自治区     |
| 陕西   | 陕西省           | 甘肃 | 甘肃省         |
| 青海   | 青海省           | 宁夏 | 宁夏回族自治区 |
| 新疆   | 新疆维吾尔自治区 | 台湾 | 台湾省         |
| 香港   | 香港特别行政区   | 澳门 | 澳门特别行政区 |

**总计：34 个省份/地区**

### 支持的城市

#### 直辖市

- **北京**：北京
- **天津**：天津
- **上海**：上海
- **重庆**：重庆

#### 主要省份城市（部分示例）

**河北省**：石家庄、唐山、秦皇岛、邯郸、邢台、保定、张家口、承德、沧州、廊坊、衡水

**山西省**：太原、大同、朔州、忻州、阳泉、吕梁、晋中、长治、晋城、临汾、运城

**内蒙古自治区**：呼和浩特、包头、乌海、赤峰、通辽、鄂尔多斯、呼伦贝尔、巴彦淖尔、乌兰察布

**辽宁省**：沈阳、大连、鞍山、抚顺、本溪、丹东、锦州、营口、阜新、辽阳、盘锦、铁岭、朝阳、葫芦岛

**吉林省**：长春、吉林、四平、辽源、通化、白山、松原、白城

**黑龙江省**：哈尔滨、齐齐哈尔、鸡西、鹤岗、双鸭山、大庆、伊春、佳木斯、七台河、牡丹江、黑河、绥化

**江苏省**：南京、无锡、徐州、常州、苏州、南通、连云港、淮安、盐城、扬州、镇江、泰州、宿迁

**浙江省**：杭州、宁波、温州、嘉兴、湖州、绍兴、金华、衢州、舟山、台州、丽水

**安徽省**：合肥、芜湖、蚌埠、淮南、马鞍山、淮北、铜陵、安庆、黄山、阜阳、宿州、滁州、六安、宣城、池州、亳州

**福建省**：福州、泉州、厦门、漳州、莆田、三明、南平、龙岩、宁德

**江西省**：南昌、景德镇、萍乡、九江、新余、鹰潭、赣州、吉安、宜春、抚州、上饶

**山东省**：济南、青岛、淄博、枣庄、东营、烟台、潍坊、济宁、泰安、威海、日照、临沂、德州、聊城、滨州、菏泽

**河南省**：郑州、开封、洛阳、平顶山、安阳、鹤壁、新乡、焦作、濮阳、许昌、漯河、三门峡、南阳、商丘、信阳、周口、驻马店

**湖北省**：武汉、黄石、十堰、宜昌、襄阳、鄂州、荆门、孝感、荆州、黄冈、咸宁、随州

**湖南省**：长沙、株洲、湘潭、衡阳、邵阳、岳阳、常德、张家界、益阳、郴州、永州、怀化、娄底

**广东省**：广州、深圳、珠海、汕头、佛山、韶关、湛江、肇庆、江门、茂名、惠州、梅州、汕尾、河源、阳江、清远、东莞、中山、潮州、揭阳、云浮

**广西壮族自治区**：南宁、柳州、桂林、梧州、北海、防城港、钦州、贵港、玉林、百色、贺州、河池、来宾、崇左

**海南省**：海口、三亚、三沙、儋州

**四川省**：成都、自贡、攀枝花、泸州、德阳、绵阳、广元、遂宁、内江、乐山、南充、眉山、宜宾、广安、达州、雅安、巴中、资阳

**贵州省**：贵阳、六盘水、遵义、安顺、毕节、铜仁

**云南省**：昆明、曲靖、玉溪、保山、昭通、丽江、普洱、临沧

**西藏自治区**：拉萨、日喀则、昌都、林芝、山南、那曲、阿里

**陕西省**：西安、铜川、宝鸡、咸阳、渭南、延安、汉中、榆林、安康、商洛

**甘肃省**：兰州、嘉峪关、金昌、白银、天水、武威、张掖、平凉、酒泉、庆阳、定西、陇南

**青海省**：西宁、海东

**宁夏回族自治区**：银川、石嘴山、吴忠、固原、中卫

**新疆维吾尔自治区**：乌鲁木齐、克拉玛依、吐鲁番、哈密

**台湾省**：台北、高雄、台中、台南、新竹、嘉义

**香港特别行政区**：香港

**澳门特别行政区**：澳门

**总计：306 个城市**

> **注意**：其他省份的城市列表会根据数据源动态获取，如果无法获取则使用省份名称作为默认城市。

### 支持的运营商

#### 基础运营商

- **电信**：中国电信
- **联通**：中国联通
- **移动**：中国移动
- **铁通**：中国铁通
- **教育网**：中国教育和科研计算机网
- **广电**：中国广播电视网络

#### 宽带运营商

- **长城宽带**：长城宽带网络服务有限公司
- **鹏博士**：鹏博士电信传媒集团

#### 云服务商

- **阿里云**：阿里云计算有限公司
- **腾讯云**：腾讯云计算（北京）有限责任公司
- **华为云**：华为技术有限公司
- **百度云**：百度云计算技术（北京）有限公司
- **亚马逊云**：Amazon Web Services
- **微软云**：Microsoft Azure

## 使用方法

### 1. IP 分组配置

1. 在[IP 分组设置]中启用 IP 分组功能
2. 配置筛选条件（省份、城市、运营商）
3. 设置分组前缀和高级选项
4. 点击保存即可

### 3. 执行同步

配置完成后，系统将：

1. 获取指定条件的 IP 段信息
2. 按省份、城市、运营商自动分组
3. 在爱快路由器上创建对应的 IP 分组
4. 显示同步结果和状态

## 分组命名规则

IP 分组将按以下格式命名：

**当分组前缀为空时：**

```
{省份}_{城市}_{运营商}
```

**当分组前缀不为空时：**

```
{前缀}_{省份}_{城市}_{运营商}
```

### 示例

- `北京_北京_电信`（前缀为空）
- `123_北京_北京_电信`（前缀为"123"）
- `广东_深圳_联通`（前缀为空）
- `my_广东_深圳_联通`（前缀为"my\_"）

## 在爱快路由中使用

创建的分组可以在爱快路由的以下功能中使用：

1. **流控分流**：在流控规则中指定 IP 分组
2. **防火墙规则**：在防火墙中限制或允许特定 IP 分组
3. **端口映射**：针对特定 IP 分组进行端口映射
4. **DHCP 设置**：为特定 IP 分组分配 DHCP 地址池

## 注意事项

1. **网络连接**：确保能够访问数据源和爱快路由
2. **权限要求**：爱快路由用户需要有 IP 分组管理权限
3. **数据准确性**：IP 段信息来源于数据源，请确保数据准确性
4. **分组数量**：建议不要创建过多分组，以免影响路由性能
5. **定期更新**：建议定期同步 IP 分组以获取最新的 IP 段信息

## 故障排除

### 常见问题

1. **登录失败**

   - 检查爱快路由地址、用户名、密码是否正确
   - 确认网络连接正常

2. **获取 IP 段失败**

   - 检查网络连接是否正常
   - 确认筛选条件是否正确
   - 确认选择的省份和城市是否在支持列表中

3. **创建分组失败**
   - 检查爱快路由用户权限
   - 确认分组名称是否重复
   - 查看日志获取详细错误信息

### 日志查看

在插件页面可以查看详细的执行日志，包括：

- 同步开始和结束时间
- 获取到的 IP 段数量
- 创建的分组数量
- 错误信息和状态

## 技术支持

如有问题或建议，请通过以下方式联系：

- **GitHub Issues**：[项目地址](https://github.com/yujiajie01/MoviePilot-Plugins)
- **作者**：M.Jinxi
- **主页**：[https://github.com/yujiajie01](https://github.com/yujiajie01)
