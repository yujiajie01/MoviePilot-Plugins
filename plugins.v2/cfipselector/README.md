# PT云盾优选 插件配置说明

## 支持的数据中心三字码

| 三字码 | 名称           | 国家/地区 | IPv4段数 | IPv6段数 | 总段数 |
|--------|----------------|-----------|----------|----------|--------|
| HKG    | 中国香港       | HK        | 60       | 7        | 67     |
| SJC    | 美国圣何塞     | US        | 2532     | 271      | 2803   |
| LAX    | 美国洛杉矶     | US        | 36       | 7        | 43     |
| SIN    | 新加坡         | SG        | 86       | 8        | 94     |
| NRT    | 日本东京       | JP        | 92       | 7        | 99     |
| FRA    | 德国法兰克福   | DE        | 112      | 1        | 113    |
| CDG    | 法国巴黎       | FR        | 66       | 152      | 218    |
| LHR    | 英国伦敦       | GB        | 112      | 27       | 139    |
| JFK    | 美国纽约       | US        | 656      | 4        | 660    |
| DFW    | 美国达拉斯     | US        | 39       | 2        | 41     |
| GRU    | 巴西圣保罗     | BR        | 116      | 1        | 117    |
| SYD    | 澳大利亚悉尼   | AU        | 566      | 1        | 567    |
| YYZ    | 加拿大多伦多   | CA        | 3135     | 175      | 3310   |

> **数据中心统计说明：**
> - **IPv4段数**：该数据中心包含的IPv4网段数量
> - **IPv6段数**：该数据中心包含的IPv6网段数量  
> - **总段数**：IPv4和IPv6网段的总数
> - 段数越多，优选时可选择的IP范围越大，优选效果越好
> - SJC,YYZ,HKG,NRT,SIN,LAX,DFW,ORD,ATL,AMS,FRA,LHR

> 你可以在"数据中心"配置项中填写上述任意三字码，多个用英文逗号分隔，如：`YYZ,SJC`

---

## 主要配置项说明

- **启用插件**
  - 作用：总开关，启用后自动定时优选。
  - 推荐：开启
  - 说明：关闭后所有自动优选和hosts写入功能暂停。

- **发送通知**
  - 作用：优选结果推送到消息中心。
  - 推荐：开启，便于及时获知优选结果。

- **加密连接**
  - 作用：测速时是否使用HTTPS。
  - 推荐：开启（大部分PT站点和tracker都支持HTTPS）。
  - 注意：部分站点如只支持HTTP可关闭。

- **立即运行**
  - 作用：保存后立即执行一次优选。
  - 推荐：仅在需要手动触发时开启。
  - 说明：每次保存配置时自动关闭。

- **PT站点优选**
  - 作用：是否对PT站点域名进行优选。
  - 推荐：开启
  - 说明：关闭后只对tracker优选。

- **Tracker优选**
  - 作用：是否对tracker域名进行优选。
  - 推荐：开启
  - 说明：关闭后只对PT站点优选。

- **并发线程数**
  - 作用：每轮检测的最大并发数。
  - 推荐：20-100
  - 注意：过高可能导致网络压力或被目标站点限流，过低影响优选速度。

- **CIDR抽样数**
  - 作用：每轮从IP池随机抽取多少个IP参与优选。
  - 推荐：100
  - 说明：数值越大，优选更全面但耗时更长。

- **候选数量**
  - 作用：第二阶段参与Cloudflare节点判断的IP数量。
  - 推荐：20
  - 说明：影响最终测速的IP数量。

- **优选数量**
  - 作用：最终选出多少个最优IP。
  - 推荐：10
  - 说明：会写入hosts的IP数量。

- **端口**
  - 作用：测速时使用的端口。
  - 推荐：443（HTTPS），如站点特殊可改为80（HTTP）。

- **IP类型(4/6/46)**
  - 作用：4=IPv4, 6=IPv6, 46=双栈。
  - 推荐：4（IPv4）
  - 注意：IPv6可能导致内存占用高，建议优先用IPv4。

- **数据中心**
  - 作用：只检测指定数据中心的IP，多个用逗号分隔。
  - 推荐：HKG,SJC（中国香港+美国圣何塞）
  - 说明：可参考上表填写三字码。
  - 示例：`HKG,SJC,NRT`

- **定时任务(cron)**
  - 作用：定时自动优选的cron表达式。
  - 推荐：`0 3 * * *`（每天凌晨3点）
  - 示例：
    - `0 3 * * *`：每天3点执行
    - `0 */6 * * *`：每6小时执行一次
  - 说明：cron表达式为5段，依次为分 时 日 月 周。

- **延迟阈值(ms)**
  - 作用：超过该延迟的IP会被淘汰。
  - 推荐：1500
  - 说明：单位为毫秒，数值越小筛选越严格。

- **tracker域名地址**
  - 作用：可填写GitHub/raw地址，优选时会从此地址同步tracker列表。
  - 推荐：留空使用内置默认列表，或填写自定义txt链接。
  - 示例：`https://raw.githubusercontent.com/xxx/xxx.txt`

- **Tracker优选域名**
  - 作用：填写需要优选的tracker域名，一行一个。
  - 推荐：填写常用tracker域名，或留空使用内置列表。
  - 支持格式：
    - 直接域名，如`tracker.example.com`
    - DOMAIN-SUFFIX格式，如`tracker.site.com`
  - 说明：每行一个，支持自定义和粘贴网络收集的tracker列表。

---

如需详细帮助，请参考插件主页或联系作者。 